<!DOCTYPE html>
<html>
	{% load staticfiles %}
	<head>
		<title>Thread-{{thread.id}}</title>
		<style>
		@font-face {
				font-family: print;
				src: url("{% static 'fonts/print.ttf'%}");
			}
			* {
				padding: 0px;
				margin: px;
			}
			body {
				padding: 30px;
			}
			#divThread {
				border: 1px solid black;
				width: 500px;
				border-radius: 10px;
				text-align: center;
				padding: 10px;
				margin: auto;
				margin-bottom: 10px;
			}
			.threadTitle {
				text-decoration: underline;
				display: block;
				font-size: 20px;
				font-family: verdana, arial;
			}
			.threadText {
				font-size: 18px;
				display: block;
			}
			.threadTime{
				font-size: 12px;
			}

			.divPost{
				border-top: 1px solid black;
				background-color: #F2f2f2;
				padding: 3px 10px;
				width: 500px;
				margin: auto;
				font-family: sans-serif;
			}
			.postNo {
				display: block;
				font-size: 15px;
				text-decoration: underline;
			}
			.postText{
				display: block;
				font-size: 18px;
				font-family: garamond ;
			}
			.postTime{
				display: block;
				font-size: 12px;
			}

			#id_text {
				width: 300px;
				height: 25px;
				padding: 2px 10px;
				margin-left: 50px;
				margin-top: 15px;
			}
			#id_submit {
				height: 33px;
				text-align: center;
				line-height: 25px;
				width: 100px;
				border: 1px solid gray;
				font-size: 15px;
				color: white;
				background-color: #6600FF;
				border-radius: 2px;
				margin-left: 10px;
			}
			#id_submit:hover {
				background-color: #80B2FF;
				color: black;
				box-shadow: 0px 0px 1px 1px gray;
			}
			#id_submit:hover {
				border: 1px solid black;
			}
			#id_submit:focus{
				border-color: blue;
			}
			#divformend {
				width: 490px;
				margin: auto;
			}
			.spanreport {
				position: relative;
				left: 450px;
				display: inline;
			}
		</style>
		
	</head>
	<body>
		<div id="divThread">
		<span class="threadTitle">{{thread.title}}</span>
		<span class="threadText">{{thread.text}}</span>
		<span class="threadTime" id="threadtime">
			<script>
			var thread_time = new Date("{{thread.time|date:'Y/m/d H:i:s'}}");
			var current=new Date();
			var c=current-thread_time;
			// if difference is less than 1 second
			if(c<1000) document.getElementById("threadtime").innerHTML="Just Now";
			// if difference is less than 2 minutes and difference is
			else if((c/60000)<120 && (c/3600000)<1) document.getElementById("threadtime").innerHTML=Math.round(c/60000)+" min ago";
			else if((c/3600000)<1) document.getElementById("threadtime").innerHTML=Math.round(c/60000)+" mins ago";
			else if(c/3600000<2) document.getElementById("threadtime").innerHTML=Math.round(c/3600000)+" Hour Ago";
			else if(c/3600000>2 && c/86400000<1) document.getElementById("threadtime").innerHTML=Math.round(c/3600000)+" Hours Ago";
			else if(c/86400000>1) document.getElementById("threadtime").innerHTML="{{thread.time}}";
		</script>
	</span>
			<form action="/app/report_thread/{{thread.id}}/" method="post">
			{% csrf_token %}
			{{thread_report_form.message}}
			<input type = "submit" value="Report Thread">
		</form>
		</div>

		{% for i in posts %}
		<div class="divPost">
			<span class="spanreport">Report</span>
			<span class="postNo">Post #{{i.id}}</span>
			<span class="postText">{{i.text}}</span>
			<span class="postTime" id="post{{i.id}}"><script>
			var a = new Date("{{i.time_posted|date:'Y/m/d H:i:s'}}");
			var b=new Date();
			var c=b-a;
			if(c<1000) document.getElementById("post{{i.id}}").innerHTML="Just Now";
			else if((c/60000)<120 && (c/3600000)<1) document.getElementById("post{{i.id}}").innerHTML=Math.round(c/60000)+" min ago";
			else if((c/3600000)<1) document.getElementById("post{{i.id}}").innerHTML=Math.round(c/60000)+" mins ago";
			else if(c/3600000<2) document.getElementById("post{{i.id}}").innerHTML=Math.round(c/3600000)+" Hour Ago";
			else if(c/3600000>2) document.getElementById("post{{i.id}}").innerHTML=Math.round(c/3600000)+" Hours Ago";
		</script></span>	
		
		<form action="/app/report_post/{{i.id}}/" method="post">
				{% csrf_token %}
				{{post_report_form.message}}
				<input type = "submit" value = "Report Post">
		</form>		
		</div>
		{% endfor %}
		<div id="divformend">

		<form action="/app/thread/{{thread.id}}/" method="post">
			{% csrf_token %}
			{{post_form.text}}
			<input type="submit" name="submit" value="Add Post" id="id_submit" />
		</form>
		<button id="button1" onClick="func1()">Click</button>
	</div>
	</body>
</html>
